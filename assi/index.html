<!DOCTYPE html>
<html>
<head><title>Hello Pikari</title></head>
<body><input id='input'/></body>
<script src='./pikari.js'></script>
<script>
let e=function(id){return document.getElementById(id)}
let readValue=function(){e('input').value=Pikari.getOrDefault("input", "")}
e('input').addEventListener('input', async function(){
  if (!await Pikari.setLocks('input')) return readValue()
  Pikari.data.set('input', e('input').value)
  Pikari.commit()
})
Pikari.addChangeListener(readValue)
Pikari.start()
</script>
</html>